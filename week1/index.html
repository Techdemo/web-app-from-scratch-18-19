<!DOCTYPE html>
<html>
  <head>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
    <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>web app from scratch</title>
  <link rel="stylesheet" href="./public/css/styles.css" type="text/css">
  </head>
  <header>
    <a href="/week1/">Home</a>
  </header>
  <body>
    <form>
        <select id="pageNum">
      </select>
    </form>
      <button id="submit">Search</button>
      <button id="submitAll">Submit all pages</button>
    <main id="root">

    </main>
  <script type="module" src="./public/js/app.js"></script>

    <script>

      window.addEventListener('hashchange', function (e){
        let url = window.location.hash.substring(1)
        let app = document.getElementById("root")
        fetch(url)
          .then(data => {
            return data.json();
          })
          .then(res =>{
            console.log(res)
            app.innerHTML = ''
            renderDetail(res)
          })

          let renderDetail = planetDetail => {
            let planetDetailCard = document.createElement("article")
            planetDetailCard.setAttribute("class", "planetContainer")
            app.appendChild(planetDetailCard)

            Object.keys(planetDetail).forEach(function (key) {
             let planetDetailItem = document.createElement("p");
             planetDetailItem.textContent = key + ": "+ planetDetail[key]
             let article = document.querySelector("article")
             article.appendChild(planetDetailItem)
            });

          }
      })
    </script>

</body>

</html>
